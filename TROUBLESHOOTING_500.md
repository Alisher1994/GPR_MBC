# üö® Troubleshooting: –û—à–∏–±–∫–∞ 500 –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –æ–±—ä–µ–∫—Ç–æ–≤

## –ü—Ä–æ–±–ª–µ–º–∞
```
Failed to load resource: the server responded with a status of 500 ()
/api/planner/objects
```

## –ü—Ä–∏—á–∏–Ω–∞
–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ Railway –Ω–µ –ø—Ä–æ—à–ª–∞ –º–∏–≥—Ä–∞—Ü–∏—é –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏ `objects`, `sections`, `xml_files`.

---

## –†–µ—à–µ–Ω–∏–µ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ Railway Dashboard

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ Railway Dashboard
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [railway.app](https://railway.app)
2. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç **gpr-mbc-production**
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **Deployments**

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –¥–µ–ø–ª–æ—è
–ù–∞–π–¥–∏—Ç–µ –≤ –ª–æ–≥–∞—Ö:
```
Running database migrations...
‚úÖ Migration completed successfully
```

–ï—Å–ª–∏ —ç—Ç–æ–π —Å—Ç—Ä–æ–∫–∏ –Ω–µ—Ç –∏–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∞ - –º–∏–≥—Ä–∞—Ü–∏—è –Ω–µ –ø—Ä–æ—à–ª–∞!

### –®–∞–≥ 3: –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π —Ä–µ–¥–µ–ø–ª–æ–π
1. –í Railway Dashboard ‚Üí –≤–∞—à –ø—Ä–æ–µ–∫—Ç
2. –ù–∞–∂–º–∏—Ç–µ **"Redeploy"** (—Ç—Ä–∏ —Ç–æ—á–∫–∏ ‚Üí Redeploy)
3. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥–µ–ø–ª–æ—è
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –º–∏–≥—Ä–∞—Ü–∏–∏

---

## –†–µ—à–µ–Ω–∏–µ 2: –†—É—á–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ Railway CLI

### –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Railway CLI
```bash
npm install -g @railway/cli
```

### –í–æ–π–¥–∏—Ç–µ –≤ Railway
```bash
railway login
```

### –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –ø—Ä–æ–µ–∫—Ç—É
```bash
railway link
```

### –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é
```bash
railway run node server/db/migrate.js
```

---

## –†–µ—à–µ–Ω–∏–µ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ psql (–µ—Å–ª–∏ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ –ë–î)

### –ü–æ–ª—É—á–∏—Ç–µ DATABASE_URL –∏–∑ Railway
1. Railway Dashboard ‚Üí –≤–∞—à –ø—Ä–æ–µ–∫—Ç ‚Üí Variables
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ `DATABASE_URL`

### –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –ë–î
```bash
psql "postgresql://user:password@host:port/database"
```

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ —Ç–∞–±–ª–∏—Ü
```sql
\dt
```

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ç–∞–±–ª–∏—Ü—ã:
- `objects`
- `sections`
- `xml_files`
- `work_items` (—Å –∫–æ–ª–æ–Ω–∫–æ–π `section_id`)

### –ï—Å–ª–∏ —Ç–∞–±–ª–∏—Ü –Ω–µ—Ç - –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é –≤—Ä—É—á–Ω—É—é
–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `server/db/migrate.js` –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –∫–æ–º–∞–Ω–¥—ã –≤—Ä—É—á–Ω—É—é.

---

## –†–µ—à–µ–Ω–∏–µ 4: –°–±—Ä–æ—Å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –ø–æ–ª–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è

‚ö†Ô∏è **–í–ù–ò–ú–ê–ù–ò–ï**: –≠—Ç–æ —É–¥–∞–ª–∏—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ!

### –í Railway Dashboard:
1. –û—Ç–∫—Ä–æ–π—Ç–µ PostgreSQL —Å–µ—Ä–≤–∏—Å
2. Settings ‚Üí Danger ‚Üí Remove Database
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –ë–î
4. –û–±–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `DATABASE_URL` –≤ –≤–∞—à–µ–º —Å–µ—Ä–≤–∏—Å–µ
5. Redeploy –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```
https://gpr-mbc-production.up.railway.app
```

### 2. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ –ø–ª–∞–Ω–æ–≤–∏–∫
- –õ–æ–≥–∏–Ω: planner
- –ü–∞—Ä–æ–ª—å: (–≤–∞—à –ø–∞—Ä–æ–ª—å)

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
–ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫ 500

### 4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ–∑–¥–∞—Ç—å –æ–±—ä–µ–∫—Ç
–ù–∞–∂–º–∏—Ç–µ "+ –î–æ–±–∞–≤–∏—Ç—å" ‚Üí –≤–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ ‚Üí "–°–æ–∑–¥–∞—Ç—å"

–ï—Å–ª–∏ –æ–±—ä–µ–∫—Ç —Å–æ–∑–¥–∞–ª—Å—è - –º–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ! ‚úÖ

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î –ª–æ–∫–∞–ª—å–Ω–æ
–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ:

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –ø–∞–ø–∫–µ `server`:
```env
DATABASE_URL=postgresql://user:password@localhost:5432/gpr_mbc
JWT_SECRET=your-secret-key
PORT=3001
```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ PostgreSQL –ª–æ–∫–∞–ª—å–Ω–æ

3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é:
```bash
cd server
node db/migrate.js
```

4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:
```bash
npm run dev
```

5. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5173

---

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–∞–µ—Ç—Å—è:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Railway –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –¥—Ä—É–≥–∏—Ö –æ—à–∏–±–æ–∫
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ DATABASE_URL –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ PostgreSQL —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –ë–î –≤ Railway

**–ü–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç —Å –º–∏–≥—Ä–∞—Ü–∏–µ–π**: `6923021`
**–î–∞—Ç–∞**: 3 –¥–µ–∫–∞–±—Ä—è 2024
